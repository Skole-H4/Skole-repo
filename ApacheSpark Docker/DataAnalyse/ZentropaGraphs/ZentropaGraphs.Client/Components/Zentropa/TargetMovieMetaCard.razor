@inject HttpClient Http

@if (_error is not null)
{
    <div class="alert alert-danger">Failed to load focus movie meta-data: @_error</div>
}
else if (_meta is null)
{
    <div class="alert alert-info">Loading focus movie meta-data...</div>
}
else
{
    <div class="card mb-4 border-success">
        <div class="card-body">
            <h2 class="h5">Focus Movie</h2>
            <p class="lead mb-1">@_meta.title</p>
            <p class="mb-0 text-muted">Window: @_meta.start_year &ndash; @_meta.end_year</p>
        </div>
    </div>
}

@code {
    private FocusMovieMeta? _meta;
    private string? _error;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var items = await Http.GetFromJsonAsync<List<FocusMovieMeta>>("ZentropaData/target_movie_ratings_10y_meta.json");
            _meta = items?.FirstOrDefault();
        }
        catch (Exception ex)
        {
            _error = ex.Message;
        }
    }

    private sealed record FocusMovieMeta(string title, int start_year, int end_year);
}
